-------------------------------------------------------------------------------------------
1 PASSO - INSTALAR O VITE
Criar a pasta front-end
Digitar no terminal, pasta front-end:
npm create vite@latest .
O espa√ßo e ponto e para inidicar a cria√ß√£o do vite justamente na pasta em quest√£o
React
JavaScript

Foi criado v√°rios arquivos, assim como package.json

Para instalar as depend√™ncias que est√£o no package.json
Digitar no terminal, pasta front-end:
npm install
Ser√° criado a pasta node_modules

Para rodar o script que est√° no package.json
Digitar no terminal, pasta front-end:
npm run dev

Deletar o README.md
Deixar o arquivo App.jsx assim:

// Componentes = fun√ß√µes
function App() {
  return <></>;
}
export default App;

Deletar reac.svg, est√° em src/assets
Retirar do index.html => <link rel="icon" type="image/svg+xml" href="/vite.svg" />
Alterar o title

Deletar a pasta public

Em assets, criar o style.css na mesma pasta do main.jsx
Colar bem no in√≠cio do index.css:

@import url("https://fonts.googleapis.com/css2?family=Montserrat:wght@500;600;700&display=swap");
/* ----- FAZER O RESET ----- */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

Em main.jsx, importar o style.css do projeto
import "./style.css";

Deletar o index.css
Deletar o App.css


-------------------------------------------------------------------------------------------
2 PASSO - INSTALAR C√ìDIGO DO FONT AWESOME React
Ir no site, clicar em docs => view the docs => Integrations => React => Set Up with React

Rolar para baixo at√© Add SVG Core e pegar o c√≥digo
Digitar no terminal, pasta front-end:
npm i --save @fortawesome/fontawesome-svg-core

Rolar mais para baixo at√© Add Icons Packages e pegar o c√≥digo em Free SVG Icon Package
Digitar no terminal tudo de uma vez s√≥, pasta front-end:
npm i --save @fortawesome/free-solid-svg-icons
npm i --save @fortawesome/free-regular-svg-icons
npm i --save @fortawesome/free-brands-svg-icons

Rolar mais para baixo at√© Add React Component e pegar o c√≥digo
Digitar no terminal, pasta front-end:
npm i --save @fortawesome/react-fontawesome@latest


-----------------------------------------------------------------------------------------
3 PASSO - CRIAR O HEADER
Em src criar a pasta components e criar o arquivo Header.jsx
Em App.jsx importar o Header.jsx
O arquivo App.jsx vai ficar assim
import Header from "./components/Header";

function App() {
  return (
    <>
      <Header />
    </>
  );
}
export default App;


Colocar no arquivo onde for utilizar o √≠cone
import { FontAwesomeIcon } from "@fortawesome/react-fontawesome";

E para instalar o √≠cnone precisa importar - React / Individual import
O arquivo Header ficar√° assim:

import { FontAwesomeIcon } from "@fortawesome/react-fontawesome";
import { faHouseChimney } from "@fortawesome/free-solid-svg-icons";
import { faCircleLeft } from "@fortawesome/free-solid-svg-icons";

const Header = () => {
  return (
    <header className="header">
      <FontAwesomeIcon icon={faCircleLeft} />
      <h1>Daniel</h1>
      <FontAwesomeIcon icon={faHouseChimney} />
    </header>
  );
};

export default Header;


-----------------------------------------------------------------------------------------
4 PASSO - SUBIR PROJETO PARA O GITHUB
Antes,
No package.json global, do backend e frontend do projeto, criar uma pasta .gitignore:
node_modules


Abrir o github:
Ir em new
Colocar o nome do reposit√≥rio, ex: TaskList
Deixar em p√∫blico
Clicar em criar reposit√≥rio

Agora √© ir para o VS Code 
Abrir na pasta global
Digite no terminal:
git init, vai deixar os arquivos U
git add .
git commit -m "Salvando projeto no Github"
Em or push an existing repository from the comnad line
Copiar todos os c√≥digos e rodar no terminal:
git remote add origin https://github.com/dvs78/CafeApp.git
git branch -M main
git push -u origin main

Avisos de "LF will be replaced by CRLF"
Isso √© apenas um aviso de que as quebras de linha no seu projeto (LF ‚Äî estilo Unix) est√£o sendo convertidas para o estilo do Windows (CRLF). Eles n√£o impedem o funcionamento nem o commit dos arquivos.

Digite no terminal:
git config --global core.autocrlf true
Esse comando faz o Git converter LF para CRLF no checkout e reverter para LF no commit.


-----------------------------------------------------------------------------------------
5 PASSO - CRIAR A P√ÅGINA LOGIN

import React, { useState } from "react";
import { useNavigate } from "react-router-dom"; // import para navega√ß√£o

const Login = () => {
  const [senha, setSenha] = useState("");
  const navigate = useNavigate(); // hook do react-router

  const handleLogin = () => {
    // Aqui voc√™ pode validar a senha
    if (senha === "1234") {
      // Se a senha estiver certa, vai para Home
      navigate("/home");
    } else {
      alert("Senha incorreta!");
    }
  };

  return (
    <div className="login__container">
      <h1>Login</h1>
      <label className="label__login" htmlFor="input__login">
        Digite sua senha:
      </label>
      <input
        type="password"
        name="input__login"
        placeholder="senha"
        value={senha}
        onChange={(e) => {
          setSenha(e.target.value);
        }}
      />
      <button className="btn__enter" onClick={handleLogin}>
        <h3>Entrar</h3>
      </button>
    </div>
  );
};

export default Login;


-----------------------------------------------------------------------------------------
6. CRIANDO AS ROTAS DO PROJETO
Instalar o gerenciador de rotas
Digitar no terminal, pasta front-end:
npm i react-router-dom

Em App.jsx, importar BrowserRouter, Routes e Route para gerenciar as rotas:
import { BrowserRouter, Routes, Route } from "react-router-dom";

Dentro da pasta src criar a pasta Pages e dentro delas ciar a pasta Login e Home e dentro de cada pasta criar os arquivos Login e Home
Dentro da pasta components, criar o arquivo Header

Deixar a p√°gina App.jsx, assim:
import Home from "./pages/home/Home";
import Login from "./pages/login/Login";
import { BrowserRouter, Routes, Route } from "react-router-dom";

function App() {
  return (
    <div className="app_components">
      <BrowserRouter>
        <Routes>
          <Route path="/" element={<Login />} />
          <Route path="/home" element={<Home />} />
        </Routes>
      </BrowserRouter>
    </div>
  );
}
export default App;


-----------------------------------------------------------------------------------------
7. CRIA√á√ÉO DO BACK-END
Vamos criar a API do projeto. Preparar o projeto para receber requisi√ß√£o e resposta 
Ent√£o vamos criar a pasta back-end e vamos precisar do package.json
Digitar no terminal, na pasta back-end:
npm init -y
Esse -y √© para concordar com tudo que ser√° proposto para configurar, se quiser configurar personalizado, basta digitar = npm init, mas nessa altura do projeto n√£o tem necessidade

No package.json do back-end, colocar depois de  "description": "", isso aqui  "type": "module"


-----------------------------------------------------------------------------------------
8. CRIA√á√ÉO DO EXPRESS
Biblioteca do back-end
Vamos instalar o express
Digitar no terminal, na pasta back-end:
npm i express

Criar o arquivo index.js (server.js) no back-end, √© o servidor da api
S√≥ para lembrar que no package.json vai criar assim "main": "index.js", ser√° o arquivo server.js. Por isso vamos criar o arquivo index.js se quiser criar server.js, alterar no package.json assim "main": "server.js"

Vamos importar o express em index.js
import express from "express";

Colocar todas as fun√ß√µes do express na vari√°vel app
const app = express();

Colocar o app para rodar, ou seja, receber pedidos ou enviar respostas
app.listen(3000, () => {
  console.log("Meu servidor est√° rodando na porta http://localhost:3000");
});

O back-end roda na porta 3000
O front-end roda na porta 5175
O console.log no back-end roda pelo node no terminal
O console.log no front-end roda pelo inspecionar, na tela

Toda vez que mudar o arquivo, para n√£o ter que matar o back-end e atualizar, passar a instru√ß√£o node --watch ./index.js


-----------------------------------------------------------------------------------------
9. CRIANDO REQUISI√á√ÉO GET =  ENDPOINT "/"

No back-end chama endpoint, http://localhost:3000
O front-end chama rota, http://localhost:5173

Por enquanto o endpoint http://localhost:3000 vai aparecer Cannot GET /

GET - Pegar informa√ß√µes, n√£o aceita requisi√ß√£o (body), s√≥ aceita resposta
PUT/PATCH - Editar informa√ß√µes, aceita requisi√ß√£o (body), aceita resposta
DELETE - Deletar informa√ß√µes, aceita requisi√ß√£o (body), aceita resposta
POST - Criar informa√ß√µes, aceita requisi√ß√£o (body), aceita resposta

Vamos passar as intru√ß√µes antes de escutar (app.listen)

Minha 1 resposta para requisi√ß√£o GET
import express from "express";

// Colocar todas as fun√ß√µes do express na vari√°vel app
const app = express();

// Criando requisi√ß√£o get = endpoint com barra
app.get("/", (req, res) => {
  res.send("Ol√°, mundo!");
});

Agora o endpoint https://localhost:3000 vai aparecer Ol√°, mundo!

// Colocar o app para rodar, ou seja, receber pedidos ou enviar respostas
app.listen(3000, () =>
  console.log("Meu servidor est√° rodando na porta http://localhost:3000")
);

Toda vez que mudar o arquivo, para n√£o ter que matar o back-end e atualizar, passar a instru√ß√£o node --watch ./index.js


-----------------------------------------------------------------------------------------
10. CRIANDO REQUISI√á√ÉO POST =  ENDPOINT "/"

Toda requisi√ß√£o na web, √© do tipo get, por isso √© necess√°rio baixar um programa para testar outro tipos de requis√ß√µes, ex:
app.post("/", (req, res) => {
  res.send("Informa√ß√£o nova criada com sucesso!");
});

Utilizar o aplicativo reqbin para requisi√ß√£o e resposta
Digitar no google:
reqbin
Escrecer o caminho http://localhost:3000 e escolher a requisi√ß√£o
reqbin n√£o aceita https s√≥ http
reqbin vai fazer o papel do front-end

para receber um json no reqbin colocar em body
{"key": "value"}
ex: {"nome": "Daniel", "idade": 47}

Middleware (express.json()): toda requisi√ß√£o com res.json, transforma em json, ou seja,todo body que chegar transforma em json

Alterar a requisi√ß√£o post
app.use(express.json());

app.post("/", (req, res) => {
  const body = req.body;
  console.log(body.nome); // vai aparecer no terminal
  res.json({ nome: body.nome }); // vai aparecer no reqbin
});

Deixar a requisi√ß√£o post mais adequada
DESESTRUTURA√á√ÉO, pega chave dentro do objeto

app.post("/", (req, res) => {
  const { body } = req; // o body √© uma chave do objeto req, seria assim req = { body: {"nome": "Daniel", "idade": 47} }
  console.log(body.nome); // vai aparecer no terminal
  res.json({ nome: body.nome }); // vai aparecer no reqbin
});

continuar a DESESTRUTURA√á√ÉO
app.post("/", (req, res) => {
  const { body } = req; // o body √© uma chave do objeto req
  const { nome, idade } = body;
  console.log(body); // vai aparecer no terminal
  console.log(nome, idade); // vai aparecer no terminal
  res.json({ nome: nome, idade: idade }); // vai aparecer no reqbin
});

No json quando a chave e a vari√°vel tem o mesmo nome, √© s√≥ deixar a chave que retorna a vari√°vel que tem o mesmo nome da chave
app.post("/", (req, res) => {
  const { body } = req; // o body √© uma chave do objeto req
  const { nome, idade } = body;
  console.log(body); // vai aparecer no terminal
  console.log(nome, idade); // vai aparecer no terminal
  res.json({ nome, idade }); // vai aparecer no reqbin
});

Toda vez que mudar o arquivo, para n√£o ter que matar o back-end e atualizar, passar a instru√ß√£o node --watch ./index.js

-----------------------------------------------------------------------------------------
11. CRIANDO REQUISI√á√ÉO POST com ID =  ENDPOINT "/produto/:id"
PAREI AQUI!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
//req.params

// Par√¢metros da requisi√ß√£o
app.post("/produto/:id", (req, res) => {
  const { body } = req;
  const { nome, imersao } = body;

  // const id = req.params.id;
  const { id } = req.params;
  console.log(id);

  res.json({ nome, imersao });
});


--------------------------------------------------------------------------------------------
13 PASSO - CRIAR O ARQUIVO .env PARA DEIXAR OS DADOS DE CONEX√ÉO SEGUROS
S√£o as vari√°veis que n√£o ser√£o compartilhadas com terceiros
Criar arquivo .env no back-end

Colocar no arquivo .env:
DB_HOST=localhost
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=Limao_10
DB_DATABASE=TaskList

Digitar no terminal, na pasta back-end:
npm install dotenv
npm install dotenv = serve para ter acesso as vari√°veis de ambiente

--------------------------------------------------------------------------------------------
14 INSTALAR O PG ADMIN
Digitar no terminal, na pasta back-end:
npm i pg

Criar o arquivo connect.js na pasta back-end
Colocar em connect.js

import pg from "pg";
import "dotenv/config";

// Acessar o BANCO DADOS
const pool = new pg.Pool({
  host: process.env.DB_HOST,
  port: process.env.DB_PORT,
  user: process.env.DB_USER,
  password: process.env.DB_PASSWORD,
  database: process.env.DB_DATABASE,
});

// console.log((await pool.query("SELECT * FROM login")).rows);

export default pool;

Rodar o node --watch .\index.js e conferir se deu certo

parei aqui
-----------------------------------------------------------------------------------------
15 CRIAR AS ESTRUTURAS DO CRUD


Criar o arquivo de acesso ao banco de dados
Criar o arquivo db.js na pasta dbOnLine

Recortar do index.js e colar no db.js

import pg from "pg";

// Acessar o BANCO DADOS
const pool = new pg.Pool({
  host: process.env.DB_HOST,
  port: process.env.DB_PORT,
  user: process.env.DB_USER,
  password: process.env.DB_PASSWORD,
  database: process.env.DB_DATABASE,
});

console.log((await pool.query("SELECT * FROM login")).rows);

export default pool


-----------------------------------------------------------------------------------------
16 CRIAR A CLASSE GERAL DAS ROTAS
Criar a pasta crud em back-end
POST, GET, PUT, DELETE
CRUD - CREATE, READ, UPDATE e DELETE
Dentro da pasta crud, criar a pasta dbOnLine, colocar as estruturas de acesso ao banco de dados
Essa pasta vai guardar os c√≥digos que fazem comunica√ß√£o com banco de dados e ter√° tudo que for comunica√ß√£o com banco de dados
Dentro da pasta dbOnLine, criar um arquivo DbClass.js
As iniciais em mai√∫sculo, porque iremos criar uma classe nesse arquivo
Esse arquivo ter√° as a√ß√µes comuns para o banco de dados

Copiar o modelo de outros projetos

NOVO MODELO
No arquivo index.js

Rota GET para login


-----------------------------------------------------------------------------------------
17. REQUISI√á√ÉO PELO FRONT-END COM AXIOS e Middleware CORS
Instalar o axios 
Digite no terminal do front-end:
npm i axios

Importar o axios em TaskList.jsx
import axios from "axios"

Instalar o CORS para comunicar front-end com back-end
Digite no terminal do back-end:
npm i cors

Em TaskList.jsx deixar assim
import { FontAwesomeIcon } from "@fortawesome/react-fontawesome";
import { faTrash, faPencil } from "@fortawesome/free-solid-svg-icons";
import axios from "axios";

const TaskList = () => {
  const requisicaoAxios = async () => {
    // const respostaRequisicao = await axios.get(
    //   "http://localhost:3000/api/task"
    // );
    // console.log(respostaRequisicao.data);
    const { data } = await axios.get("http://localhost:3000/api/task");
    console.log(data);
  };
  requisicaoAxios();
  return (
    <div className="task__list">
      <p>tarefa</p>
      <div className="btn__task">
        <button className="btn__edit">
          <FontAwesomeIcon icon={faPencil} />
        </button>
        <button className="btn__remove">
          <FontAwesomeIcon icon={faTrash} />
        </button>
      </div>
    </div>
  );
};

export default TaskList;


-----------------------------------------------------------------------------------------
18. HOOK
Colocar as fun√ß√µes dentro do Hook
Atualiza a renderiza√ß√£o da vari√°vel alterada
useEffect(() => {  }, []);
Executa a fun√ß√£o para montar o componente e toda vez que a vari√°vel mudar

import { FontAwesomeIcon } from "@fortawesome/react-fontawesome";
import { faTrash, faPencil } from "@fortawesome/free-solid-svg-icons";
import axios from "axios";
import { useEffect } from "react";

const TaskList = () => {
  // Hook
  useEffect(() => {
    const requisicaoAxios = async () => {
      const { data } = await axios.get("http://localhost:3000/api/task");
      console.log(data);
    };
    requisicaoAxios();
  }, []);
  return (
    <div className="task__list">
      <p>tarefa</p>
      <div className="btn__task">
        <button className="btn__edit">
          <FontAwesomeIcon icon={faPencil} />
        </button>
        <button className="btn__remove">
          <FontAwesomeIcon icon={faTrash} />
        </button>
      </div>
    </div>
  );
};

export default TaskList;

Vari√°vel normal n√£o altera a renderiza√ß√£o quando est√° dentro de uma fun√ß√£o, quando ela √© alterada, somente vari√°vel de estado altera a renderiza√ß√£o

Forma correta
import { FontAwesomeIcon } from "@fortawesome/react-fontawesome";
import { faTrash, faPencil } from "@fortawesome/free-solid-svg-icons";
import axios from "axios";
import { useEffect, useState } from "react";

const TaskList = () => {
  // Vari√°vel normal
  // let variavelNormal = "teste";

  // Vari√°vel de estado
  const [variavelEstado, setVariavelEstado] = useState("teste1");

  // Hook
  useEffect(() => {
    const requisicaoAxios = async () => {
      const { data } = await axios.get("http://localhost:3000/api/task");
      console.log(data);
      // variavelNormal = "teste2"
      setVariavelEstado("teste3");
    };
    requisicaoAxios();
  }, []);
  return (
    <div className="task__list">
      <p>tarefa{variavelEstado}</p>
      <div className="btn__task">
        <button className="btn__edit">
          <FontAwesomeIcon icon={faPencil} />
        </button>
        <button className="btn__remove">
          <FontAwesomeIcon icon={faTrash} />
        </button>
      </div>
    </div>
  );
};

export default TaskList;


-----------------------------------------------------------------------------------------
18. INSTALAR PACOTE FRAMER-MOTION 
Para anima√ß√£o
Digitar no terminal, pasta front-end:
npm i framer-motion


-----------------------------------------------------------------------------------------
19. VITE CONFIG 
Em vite config deixar assim:

import { defineConfig } from "vite";
import react from "@vitejs/plugin-react";

export default defineConfig({
  plugins: [react()],
  server: {
    proxy: { "/api": "http://localhost:3000" },
  },
});

e quando puxar a rota, deixar assim:
await axios.get("/api/login")


-----------------------------------------------------------------------------------------
20. TOAST

Digitar no terminal, pasta front-end:
npm i react-toastify

App.jsx ficou assim:
import { useState } from "react";
import Home from "./pages/Home/Home";
import Login from "./pages/Login/Login";
import { BrowserRouter, Routes, Route } from "react-router-dom";
import Toast from "./components/Toast.jsx"; // ‚¨ÖÔ∏è seu container

function App() {
  return (
    <div className="app_components">
      <BrowserRouter>
       <Toast /> {/* ‚¨ÖÔ∏è precisa existir 1 vez no app inteiro */}
        <Routes>
          <Route path="/" element={<Login />} />
          <Route path="/home" element={<Home />} />
        </Routes>
      </BrowserRouter>
    </div>
  );
}
export default App;

No arquivo que ir√° usar o toast, no caso aqui AddTask.jsx, fica assim

Colar em style.css
/* style.css */
.toast-success { background: #16a34a !important; color: #fff !important; }
.toast-error   { background: #dc2626 !important; color: #fff !important; }
.toast-info    { background: #2563eb !important; color: #fff !important; }
.toast-alerta  { background: #f59e0b !important; color: #1f2937 !important; }
.toast-body    { font-weight: 500; }

-----------------------------------------------------------------------------------------
20. PREPARANDO PARA DEPLOY DO PROJETO

Digitar no terminal, pasta front-end:
npm run build
Vai construir a pasta dist

Em back-end, criar a pasta teste.js
import { fileURLToPath } from "url";
import { dirname } from "path";

// console.log(import.meta.url);
const __fileName = fileURLToPath(import.meta.url);
console.log(__fileName); // caminho do aqruivo
const __dirname = dirname(__fileName);
console.log(__dirname) // caminho da pasta

Colar em index.js
import { fileURLToPath } from "url";
import path, { dirname } from "path";

const __fileName = fileURLToPath(import.meta.url);
const __dirname = dirname(__fileName);
const caminhoDist = path.join(__dirname, "../front-end/dist");

O arquivo index.js focou assim:
import express from "express";
import cors from "cors";
import rotaLogin from "./crud/rotas/rotaLogin.js";
import rotaTask from "./crud/rotas/rotaTask.js";
import { fileURLToPath } from "url";
import path, { dirname } from "path";

const __fileName = fileURLToPath(import.meta.url);
const __dirname = dirname(__fileName);

const caminhoDist = path.join(__dirname, "../front-end/dist");
console.log(caminhoDist);

const app = express();
app.use(cors());
app.use(express.json());
app.use(express.static(caminhoDist));

// REQUISI√á√ïES
app.use("/api/login", rotaLogin);
app.use("/api/task", rotaTask);

app.get((req, res) => {
  res.sendFile(path.join(caminhoDist, "index.html"));
});

// SERVIDOR ESCUTAR
const PORTA = 3000;
app.listen(PORTA, () => {
  console.log(`Meu servidor est√° rodando na porta ${PORTA}`);
});


Ir em App.jsx e diexar assim:
import { useState } from "react";
import Home from "./pages/Home/Home";
import Login from "./pages/Login/Login";
import { BrowserRouter, Routes, Route } from "react-router-dom";
import Toast from "./components/Toast.jsx"; // ‚¨ÖÔ∏è seu container
import axios from "axios";

Tem que colocar
axios.defaults.baseURL = "http://localhost:3000/api/";

function App() {
  return (
    <div className="app_components">
      <BrowserRouter>
        <Toast /> {/* ‚¨ÖÔ∏è precisa existir 1 vez no app inteiro */}
        <Routes>
          <Route path="/" element={<Login />} />
          <Route path="/home" element={<Home />} />
        </Routes>
      </BrowserRouter>
    </div>
  );
}
export default App;


Criar a pasta package.json global, digitar no terminal, pasta global:
npm init -y

No package.json global do projeto, em scripts substituir test por:
 "start": "npm run start --prefix backend",
 "build": "npm install --prefix frontend && npm install --prefix backend && npm run build --prefix frontend"

No package.json do back-end, em scripts substituir test por:
"start": "node index.js"

Digitar no terminal, pasta global:
npm run build
npm run start

No package.json global e do backend e frontend do projeto, criar uma pasta .gitignore:
node_modules


-----------------------------------------------------------------------------------------
21. DEPLOY DO PROJETO NO RENDER

V√° em + Add new
Clicar em Web Service
Clicar no projeto, vai aparecer as op√ß√µes
Em Build Command: npm run build
Em Start Command: npm run start
Selecionar free
Clicar em deploy web service

Em App.jsx alterar BASE_URL
axios.defaults.baseURL =
  import.meta.env.MODE === "development"
    ? "http://localhost:3000/api/"
    : "https://tasklist-1-n9u0.onrender.com/api";


--------------------------------------------------------------------------------------------
25 PASSO - DEPLOY DO BANDO DE DADOS NO RENDER

Cadastrar o banco de dados no Render
V√° em dashboard
Em + Add New, clique e postgres
Coloque o nome do banco de dados
Clicar em Free
Deixar os outros campos como est√£o
Clicar em create database
V√° em dashboard
Clicar no banco e dados
Clicar em connect
Copiar o caminho
postgresql://tasklist_2les_user:JmGJ5uEHInm2Ulb3BcBdB3vTJ3PvGa3S@dpg-d3024bv5r7bs73ausl9g-a/tasklist_2les
V√° em dashboard
Clique no projeto
Crie uma vari√°vel de ambiente
Key: DATABASE_URL                        Valor: postgresql://tasklist_2les_user:JmGJ5uEHInm2Ulb3BcBdB3vTJ3PvGa3S@dpg-d3024bv5r7bs73ausl9g-a/tasklist_2les
Clique em salvar



Adicione no seu package.json (o da raiz) um bloco engines:
  "scripts": {
    "start": "npm run start --prefix backend",
    "build": "npm install --prefix frontend && npm install --prefix backend && npm run build --prefix frontend"
  },
  "engines": {
    "node": "22.x"
  },

No Render, em Environment Variables, preencha:

  DATABASE_URL = postgresql://tasklist_2les_user:JmGJ5uEHInm2Ulb3BcBdB3vTJ3PvGa3S@dpg-d3024bv5r7bs73ausl9g-a/tasklist_2les
  NODE_ENV = production
  NPM_CONFIG_PRODUCTION = false

Para o back-end no Render, prefira usar a Internal Database URL (fica em ‚ÄúConnect ‚Üí Internal‚Äù l√° no dashboard do banco).
Para o pgAdmin no Windows, use sempre a External Database URL, porque voc√™ est√° acessando de fora.

No postgres local v√° Servers ‚Üí Register ‚Üí Server
Em general coloque o nome do projeto: CafeApp_Render
No Render, a External Database URL tem esse formato: postgresql://tasklist_2les_user:Jm6J5uEHm2Ul3b8cBd83vTJ3PvGa3S@dpg-d3024bv5r7bs73ausl99-a.oregon-postgres.render.com:5432/tasklist_2les

Copie e cole no chatgpt: para ele preencher

Continue no pgAdmin

Servers ‚Üí Register ‚Üí Server
V√° na aba connection


Server Name (nome amig√°vel): TaskList-Render

Host name/address: dpg-d3024bv5r7bs73ausl9g-a.oregon-postgres.render.com

Port: 5432

Database: tasklist_2les

Username / User: tasklist_2les_user

Password: JmGJ5uEHInm2Ulb3BcBdB3vTJ3PvGa3S

Marque sim

Clique na aba Parameter e deixe o valor de SSl mode = require

SSL mode: require

Salvar


No pgAdmin ‚Üí clique na seta ao lado de CafeApp_Render

O nome que voc√™ deu.

Ele deve expandir mostrando:

Databases

Login/Group Roles

Tablespaces

‚úîÔ∏è 2. Agora clique em:

Databases ‚Üí cafeappdb_8cz2 ‚Üí Schemas ‚Üí public ‚Üí Tables

N√£o vai ter tabelas, aqui √© o postgres remoto da render


Copiar tudo do banco local para o da Render (backup/restore)

Passo 1 ‚Äì Fazer backup do banco local (CafeApp)

No pgAdmin, no servidor local (PostgreSQL 17), clique com o bot√£o direito em Database ‚Üí CafeApp.

Clique em Backup‚Ä¶.

Em Format, escolha Plain (ou Custom, se preferir, mas Plain √© mais f√°cil para executar no Query Tool).

Clique no √≠cone da pastinha ao lado de Filename
(√© esse üìÅ no canto direito)

Assim:

Filename:   CafeApp_Backup    [üìÅ]


Quando voc√™ clicar no üìÅ, vai abrir a janela do Windows Explorer.

Depois:

V√° at√© a pasta onde quer salvar
üëâ exemplo: C:\Users\Daniel\Desktop

No campo de nome do arquivo, escreva:
üëâ cafeapp_backup.sql

Clique em Salvar.

De volta ao pgAdmin, clique em Backup.

Clique em Backup e espere terminar (sem erro).

Esse arquivo .sql vai conter todos os CREATE TABLE, INSERT, etc

PASSO 1 ‚Äî Abra o arquivo cafeapp_backup.sql

Abra no VS Code.

V√° no arquivo gerado no backup copie tudo e cole no chatgpt para criar os c√≥digos e ferar tabela no postgres remoto


Conferir se voc√™ tem o psql

Feche as janelas de Restore do pgAdmin.

Abra o Prompt de Comando ou PowerShell.

Digite:

psql --version


Se aparecer algo tipo psql (PostgreSQL) 17.x, est√° ok.

Se der erro de comando n√£o encontrado, use o caminho completo, por exemplo:

"C:\Program Files\PostgreSQL\17\bin\psql.exe" --version


(Ajuste o 17 se sua vers√£o for outra.)

Guarde esse caminho, vamos usar j√° j√°.

1. Comando pronto pra voc√™

No Prompt de Comando (o mesmo que voc√™ abriu), cola tudo em uma linha s√≥:

"C:\Program Files\PostgreSQL\17\bin\psql.exe" "postgresql://cafeappdb_8cz2_user:OZUlAW7ag7mdgTwerY0N1UqbDGFyqkVL@dpg-d4njnpfpm1nc73e92tmg-a.oregon-postgres.render.com:5432/cafeappdb_8cz2?sslmode=require" -f "C:\Users\Daniel\Documents\Projetos\CafeApp\cafeapp_backup.sql"


!!!!!!!!!!!!!!!!!!Se o nome da sua pasta de usu√°rio ou o caminho do arquivo for diferente, s√≥ ajusta esse peda√ßo final:
C:\Users\Bruno_Gl√°cio\Documents\Projetos\CafeApp\cafeapp_backup.sql


2. O que deve acontecer

Vai aparecer um monte de linhas passando r√°pido (CREATE TABLE, COPY, ALTER TABLE‚Ä¶).

Se tudo der certo, termina sem mensagem de erro (talvez s√≥ uns avisos).


2. Criar as vari√°veis de ambiente na Render

No painel da Render, no servi√ßo CafeApp (backend):

Des√ßa at√© Environment ‚Üí clique em Edit ou Add Environment Variable.

Crie as vari√°veis abaixo (uma por linha), usando os dados da tela ‚ÄúConnections‚Äù do seu banco CafeAppDB:

DB_HOST = dpg-d4njnpfpm1nc73e92tmg-a.oregon-postgres.render.com
DB_PORT = 5432
DB_USER = cafeappdb_8cz2_user
DB_PASSWORD = OZUlAW7ag7mdgTwerY0N1UqbDGFyqkVL, est√° em render database
DB_DATABASE = cafeappdb_8cz2

JWT_SECRET = UmaSenhaBemSecretaParaToken_CafeApp
Coloquei essa senha c@fe_25

Importante:

N√£o precisa definir PORT na Render.

No seu server.js garanta que est√° assim:

const PORT = process.env.PORT || 3001;


A Render vai passar o PORT automaticamente.

Depois de salvar as vari√°veis, clique em Manual Deploy ‚Üí Clear cache & deploy para ele reconstruir usando esses valores.

O mairo problema estav em fazer o login e n√£o armazenar o usu√°rio



N√£o fiz aqui para baixo
Checklist r√°pido (recomendado)

.gitignore
Garanta que o repo ignora:
.env, .env.*, node_modules/, frontend/node_modules/, backend/node_modules/, dist/, build/.
Inclua um .env.example (sem segredos).

Seguran√ßa
Como a URL do DB circulou, gire a senha do Postgres no Render (Database ‚Üí Rotate Password) e atualize a DATABASE_URL no Render e no seu .env local.

Render (Web Service)

Node version: fixe (ex.: 22.x) em Environment ‚Üí Node.

Health check: path /api/health.

Auto-deploy do main ligado.

Env vars: NODE_ENV=production, DATABASE_URL=<External...>.

CORS: no back, aceite apenas http://localhost:5173 (dev) e seu dom√≠nio do Render (prod).

CORS no back (exemplo)

app.use(cors({
  origin: [ "http://localhost:5173", "https://tasklist-o2yv.onrender.com" ],
  credentials: true
}));


Catch-all do React (Express 5)
Seu *any est√° ok. Se quiser refor√ßar:

app.get(/^(?!\/api).*/, (_req, res) => {
  res.sendFile(path.join(distPath, "index.html"));
});


README